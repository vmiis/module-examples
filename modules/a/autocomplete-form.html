<section id=form_container__ID>
	<div id=header__ID>
		Auto complete
	</div>
	<form id=F__ID>
		<div class="container">
			<div class="row row__ID">
				<div class="col-sm col-lg-8">
					<span>Client</span>
					<input type="text" class="form-control" name=Client id=Client__ID data-id=Client />
				</div>
				<div class="col-sm col-lg-4">
					<span>Client ID</span>
					<input type="text" class="form-control" name=Client_uid readonly />
				</div>
			</div>
			<div class="row row__ID">
				<div class=col>
					<span>Notes</span>
					<textarea class="form-control" name=Notes></textarea>
				</div>
			</div>
			<input type="text" name="Client_uid" style='display:none' />
			<br>
			<div class="row">
				<div class=col>
					<button id=submit__ID type="submit" class="btn btn-secondary">Submit</button>
				</div>
			</div>
		</div>
	</form>
</section>
<script>
	function F__ID(){
		//-------------------------------------
        VmInclude:__COMPONENT__/f/form.01.js
		//-------------------------------------
		var autocomplete_req_1={cmd:"find",field:"First_name",query:{App:"module",Table:"text-input"},options:{},skip:0,limit:10}
		var autocomplete_list_1=function(records){
		    var items=[];
		    for(var i=0;i<records.length;i++){
		        var obj={};
		        obj.label=records[i].Data.First_name+' '+records[i].Data.Last_name;
				obj['UID']=records[i].UID;
		        items.push(obj);
		    }
		    return items;
		}
		//-------------------------------------
		var autocomplete_callback_1=function(items){
			$("#F__ID input[name=Client_uid]").val(items["UID"]);
		}
		//-------------------------------------
		var start=function(){
    		$vm.autocomplete($('#Client__ID'),autocomplete_req_1,autocomplete_list_1,autocomplete_callback_1);
        }
		//-------------------------------------
        var I=0;
        var loop__ID=setInterval(function (){
            if($vm['jquery-ui-min-js']!=undefined){
                clearInterval(loop__ID); start();
            }
            I++; if(I>50){
                clearInterval(loop__ID); alert("jquery-ui.min.js is not installed.");
            }
        },100);
        //-------------------------------------
		$vm.autocomplete=function($div,req,autocomplete_list,callback){
		    var field=$div.attr('data-id');
		    $div.focus(function(){$div.autocomplete("search","");});
		    return $div.autocomplete({
		        minLength:0,
		        source:function(request,response){
					req.search=request.term;
				    $vm.request(req,function(res){
				        if(res.permission==false){
				            console.log("No permission");
				            return;
				        }
						response(autocomplete_list(res.records));
				    })
		        },
		        select: function(event,ui){
		            if(callback!=undefined){
		                callback(ui.item);
		            }
		        }
		    })
		}
		//-------------------------------------
	}
</script>
<style>
	#F__ID div span{
		display:inline-block;
		padding-bottom:5px;
	}
	#F__ID div label{
		display:inline-block;
	}
	#D__ID{
		height:100%;
		overflow:auto;
		animation: vm_module_fadein 1.0s;
		background-color:#fff;
	}
    #form_container__ID{
        margin-top:20px;
		max-width: 700px;
		margin-left: auto;
		margin-right: auto;

		font-family: Verdana,sans-serif;
    	font-size: 15px;
    	line-height: 1.5;
	}
	#form_container__ID .row__ID{
		padding:6px 5px;
	}
	#form_container__ID .row__ID:hover{
		background-color: #ddd;
	}
	#header__ID{
		background-color:#727b84;
		color:#fff;
		padding:10px 15px 10px 15px;
		font-size:120%;
        border:1px solid #bbb;
        border-bottom-width: 0;
	}
	#F__ID{
		border:1px solid #bbb;
        border-top-width: 0;
		padding:6px 15px 20px 15px;
		margin-bottom:200px;
	}
	#F__ID fieldset {
	    border: 0px solid #c0c0c0;
	    margin: 0;
	    padding: 0;
	}
	@media screen and (max-width:768px){
		#form_container__ID{
			padding:20px 10px 50px 10px;
		}
	}
    .C__ID {
        background-color: #ccc;
    }
</style>
